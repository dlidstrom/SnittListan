@model MatchResultViewModel

@if (Request.IsAuthenticated)
{
    <div class="row">
        <div class="span6 admin">
            <a class="pull-left" href="@Url.Action("RegisterBits", "MatchResultAdmin")">
                <i class="sprite-glyphicons_358_file_import"></i>
                Från BITS
            </a>
            <a class="pull-right" href="@Url.Action("Register", "MatchResultAdmin")">
                <i class="sprite-glyphicons_030_pencil"></i>
                Manuellt
            </a>
            <div class="clearfix"></div>
        </div>
    </div>
}
@foreach (var turn in Model.Turns.Keys.OrderByDescending(x => x))
{
    <div class="row">
        <div class="span12">
            @{
                var minDate = Model.Turns[turn].Select(x => x.Date)
                    .Min();
                var maxDate = Model.Turns[turn].Select(x => x.Date)
                    .Max();
            }
            <h4>
                Omgång @turn
                <em>
                    (<time datetime="@minDate.ToString("s")">@minDate.ToString("d MMM")</time>
                    &minus;
                    <time datetime="@maxDate.ToString("s")">@maxDate.ToString("d MMM")</time>)
                </em>
            </h4>
            <table class="table table-condensed table-striped result-header-table">
                <tr>
                    <th>Plats</th>
                    <th>Lag</th>
                    <th>Motståndare</th>
                    <th>Resultat</th>
                    <th></th>
                </tr>
                @{
                    var matchResults = Model.Turns[turn];
                }
                @foreach (var result in matchResults)
                {
                    <tr>
                        <td>@result.Location</td>
                        <td>@Content.TeamLabel(result.TeamLevel, result.Team)</td>
                        <td>@result.Opponent</td>
                        <td>@result.TeamScore&minus;@result.OpponentScore</td>
                        <td>@Html.ActionLink("Visa", "Details", new {
                                                                        id = result.BitsMatchId
                                                                    })</td>
                    </tr>
                }
            </table>
        </div>
    </div>
}
